DOCUMENT_NAME="MySSMDocument"

# Get the latest command ID by filtering only by document name
COMMAND_ID=$(aws ssm list-command-invocations \
  --filters "Key=document-name,Values=${DOCUMENT_NAME}" \
  --query "CommandInvocations|[-1].CommandId" \
  --output text)

# Wait for the command to finish executing
aws ssm wait command-executed --command-id "$COMMAND_ID"

echo "SSM Document Execution Finished!"
